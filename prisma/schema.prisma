generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model Merchant {
  id                    String   @id @default(uuid())
  name                  String
  clpnyReceivingAddress String
  callbackUrl           String?  
  createdAt             DateTime @default(now())
  updatedAt             DateTime @updatedAt
  PaymentIntent         PaymentIntent[]
}

model PaymentIntent {
  id               String   @id @default(uuid())
  merchantId       String
  merchant         Merchant @relation(fields: [merchantId], references: [id])
  amount           BigInt
  currency         String   @default("CLPNY")
  status           String
  description      String?
  expiresAt        DateTime
  qrPayload        String
  merchantAddress  String
  blockchainTxHash String?  
  metadata         String?  
  createdAt        DateTime @default(now())
  updatedAt        DateTime @updatedAt

  @@index([merchantId])
}
